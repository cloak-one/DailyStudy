### Java内存

#### JVM内存结构划分

![image-20240109203354012](Java%E5%86%85%E5%AD%98.assets/image-20240109203354012-17048036369661.png)

堆（Heap）：此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例 都在这里分配内存。这一点在 Java 虚拟机规范中的描述是：所有的对象实例以及数组都要在堆上分配。 

栈（Stack）：是指虚拟机栈。虚拟机栈用于存储局部变量等。局部变量表存放了编译期可知长度的各种基本数据类型（boolean、byte、char、short、int、 float、long、double）、对象引用（reference 类型，它不等同于对象本身，是对象在堆内存的首地址）。 方法执行完，自动释放

方法区（Method Area）：用于存储已被虚拟机加载的类信息、常量、静态变 量、即时编译器编译后的代码等数据。

#### 对象内存解析

**对象名中存储的是对象地址**

![image-20240109204012296](Java%E5%86%85%E5%AD%98.assets/image-20240109204012296-17048040142073.png)

#### 方法调用内存分析

![image-20240109204412593](Java%E5%86%85%E5%AD%98.assets/image-20240109204412593-17048042543675.png)

方法没有被调用的时候，都在方法区中的字节码文件(.class)中存储。

 方法被调用的时候，需要进入到栈内存中运行。方法每调用一次就会在栈中有一个入栈动作，即给当前方法开辟一块独立的内存区域，用于存储当前方法的局部变量的值。

 当方法执行结束后，会释放该内存，称为出栈，如果方法有返回值，就会把结果返回调用处，如果没有返回值，就直接结束，回到调用处继续执行下一条指令。

#### 对象数组的内存解析

![image-20240110121024949](Java%E5%86%85%E5%AD%98.assets/image-20240110121024949-17048598270361.png)